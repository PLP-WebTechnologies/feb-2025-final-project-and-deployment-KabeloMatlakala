<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShopEasy - Your Online Store</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="css/header.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
</head>

<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <h1><a href="index.html">ShopEasy</a></h1>
                </div>
                <nav>
                    <ul class="nav-links">
                        <li><a href="index.html" class="active">Home</a></li>
                        <li><a href="products.html">Products</a></li>
                        <li><a href="about.html">About</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </nav>
                <div class="header-actions">
                    <div class="user-menu">
                        <button id="user-menu-btn" class="user-menu-btn">
                            <span id="user-name">Account</span>
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M6 9l6 6 6-6" />
                            </svg>
                        </button>
                        <div id="user-dropdown" class="user-dropdown">
                            <a href="profile.html">My Profile</a>
                            <a href="orders.html">My Orders</a>
                            <a href="#" id="logout-btn">Logout</a>
                        </div>
                    </div>
                    <div class="cart-icon">
                        <span class="cart-count">0</span>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="cart-svg">
                            <circle cx="9" cy="21" r="1"></circle>
                            <circle cx="20" cy="21" r="1"></circle>
                            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                        </svg>
                    </div>
                    <button class="mobile-menu-btn">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <div class="cart-sidebar">
        <div class="cart-header">
            <h2>Your Cart</h2>
            <button class="close-cart">&times;</button>
        </div>
        <div class="cart-items">
            <!-- Cart items will be added here dynamically -->
        </div>
        <div class="cart-footer">
            <div class="cart-total">
                <span>Total:</span>
                <span class="total-price">$0.00</span>
            </div>
            <button class="checkout-btn">Proceed to Checkout</button>
        </div>
    </div>
    <div class="overlay"></div>

    <section class="hero">
        <div class="container">
            <div class="hero-content">
                <h1>Welcome to ShopEasy</h1>
                <p>Your one-stop shop for all your needs</p>
                <a href="products.html" class="btn">Shop Now</a>
            </div>
        </div>
    </section>

    <section class="featured-products">
        <div class="container">
            <h2 class="section-title">Featured Products</h2>
            <div class="products-grid" id="featured-products">
                <!-- Products will be loaded here via JavaScript -->
            </div>
        </div>
    </section>

    <section class="categories">
        <div class="container">
            <h2 class="section-title">Shop by Category</h2>
            <div class="categories-grid">
                <div class="category-card">
                    <img src="https://img.freepik.com/free-photo/clothing-rack-with-floral-hawaiian-shirts-hangers-hat_23-2149366018.jpg?ga=GA1.1.1565751335.1746975801&semt=ais_hybrid&w=740"
                        width="300" height="200" alt="Clothing">
                    <h3>Clothing</h3>
                    <a href="products.html?category=clothing" class="btn-small">View All</a>
                </div>

                <div class="category-card">
                    <img src="https://img.freepik.com/premium-photo/modern-tech-gadgets-collection_53876-1062278.jpg?ga=GA1.1.1565751335.1746975801&semt=ais_hybrid&w=740"
                        width="300" height="200" alt="Electronics">
                    <h3>Electronics</h3>
                    <a href="products.html?category=electronics" class="btn-small">View All</a>
                </div>
                <div class="category-card">
                    <img src="https://img.freepik.com/free-photo/composition-clothes-accessories-suitcase_23-2149064271.jpg?ga=GA1.1.1565751335.1746975801&semt=ais_hybrid&w=740"
                        width="300" height="200" alt="Accessories">
                    <h3>Accessories</h3>
                    <a href="products.html?category=accessories" class="btn-small">View All</a>
                </div>
                <div class="category-card">
                    <img src="https://img.freepik.com/free-photo/stylish-scandinavian-living-room-with-design-mint-sofa-furnitures-mock-up-poster-map-plants-eleg_1258-152155.jpg?ga=GA1.1.1565751335.1746975801&semt=ais_hybrid&w=740"
                        width="300" height="200" alt="Home & Living">
                    <h3>Home & Living</h3>
                    <a href="products.html?category=home" class="btn-small">View All</a>
                </div>
            </div>
        </div>
    </section>

    <section class="newsletter">
        <div class="container">
            <div class="newsletter-content">
                <h2>Subscribe to Our Newsletter</h2>
                <p>Get the latest updates on new products and upcoming sales</p>
                <form id="newsletter-form">
                    <input type="email" placeholder="Your email address" required>
                    <button type="submit" class="btn">Subscribe</button>
                </form>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>ShopEasy</h3>
                    <p>Your one-stop shop for all your needs. Quality products at affordable prices.</p>
                </div>
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="products.html">Products</a></li>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Customer Service</h3>
                    <ul>
                        <li><a href="#">FAQ</a></li>
                        <li><a href="#">Shipping Policy</a></li>
                        <li><a href="#">Return Policy</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Contact Us</h3>
                    <p>Email: info@shopeasy.com</p>
                    <p>Phone: +1 (555) 123-4567</p>
                    <div class="social-icons">
                        <a href="#" class="social-icon">FB</a>
                        <a href="#" class="social-icon">IG</a>
                        <a href="#" class="social-icon">TW</a>
                        <a href="#" class="social-icon">YT</a>
                    </div>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2025 ShopEasy. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="js/api-client.js"></script>
    <script src="js/header.js"></script>
    <script src="js/cart-sidebar.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            // Load featured products
            const featuredProductsContainer = document.getElementById('featured-products');
            if (featuredProductsContainer) {
                try {
                    const products = await getAllProducts();

                    // Take the first 4 products as featured
                    const featuredProducts = products.slice(0, 4);

                    if (featuredProducts.length === 0) {
                        featuredProductsContainer.innerHTML = '<div class="no-products">No featured products available.</div>';
                    } else {
                        featuredProductsContainer.innerHTML = '';

                        featuredProducts.forEach(product => {
                            const productCard = document.createElement('div');
                            productCard.className = 'product-card';

                            productCard.innerHTML = `
                                <img src="${product.image}" alt="${product.name}" class="product-image">
                                <div class="product-info">
                                    <h3 class="product-name">${product.name}</h3>
                                    <p class="product-price">${formatPrice(product.price)}</p>
                                    <div class="product-actions">
                                        <button class="btn btn-small add-to-cart" data-id="${product.id}">Add to Cart</button>
                                        <a href="product-detail.html?id=${product.id}" class="btn btn-small btn-secondary">View Details</a>
                                    </div>
                                </div>
                            `;

                            featuredProductsContainer.appendChild(productCard);

                            // Add event listener to the Add to Cart button
                            const addToCartBtn = productCard.querySelector('.add-to-cart');
                            addToCartBtn.addEventListener('click', function () {
                                const productId = Number.parseInt(this.getAttribute('data-id'));
                                addToCart(productId);
                                showNotification(`${product.name} added to cart!`);
                                updateCartCountDisplay();

                                // Open the cart sidebar to show the added item
                                if (window.openCartSidebar) {
                                    window.openCartSidebar();
                                }
                            });
                        });
                    }
                } catch (error) {
                    console.error('Error loading featured products:', error);
                    featuredProductsContainer.innerHTML = '<div class="error">Failed to load featured products.</div>';
                }
            }

            // Update cart count display
            updateCartCountDisplay();
        });
    </script>
</body>

</html>